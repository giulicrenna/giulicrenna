;; The first three lines of this file were inserted by DrRacket. They record metadata
;; about the language level of this file in a form that our tools can easily process.
#reader(lib "htdp-beginner-reader.ss" "lang")((modname miSemafororkt) (read-case-sensitive #t) (teachpacks ((lib "image.rkt" "teachpack" "2htdp") (lib "universe.rkt" "teachpack" "2htdp"))) (htdp-settings #(#t constructor repeating-decimal #f #t none #f ((lib "image.rkt" "teachpack" "2htdp") (lib "universe.rkt" "teachpack" "2htdp")) #f)))
(define alto 500)
(define ancho 300)
(define radio 50)
(define posX (/ 300 2))
(define posC1 125)
(define posC2 250)
(define posC3 375)
(define rojo "red")
(define verde "green")
(define amarillo "yellow")
(define apagado "black")
(define escena-vacia (empty-scene ancho alto))
(define tMax 180)
(define tMedio2 120)
(define tMedio 60)
(define tInicial 0)
(define vuelta #f)

(define (dibujar c1 c2 c3) (place-image (circle radio "solid" c1) posX posC3
  (place-image (circle radio "solid" c2) posX posC2 (place-image (circle radio "solid" c3) posX posC1 escena-vacia))))

(define (manejador-pantalla estado) (cond [(and (<= estado tMedio) (<= tInicial estado)) (dibujar rojo apagado apagado)]
                                       [(and (<= estado tMedio2) (<= tMedio estado)) (dibujar apagado amarillo apagado)]
                                       [(and (<= estado tMax) (<= tMedio2 estado)) (dibujar apagado apagado verde)]))

(define (restar n) (- n 1))

(define (sumar n) (+ n 1))

(define (manejador-reloj estado) (cond [(= estado tInicial) 180]
                                       [else (restar estado)]))

(big-bang 180
  [to-draw manejador-pantalla]
  [on-tick manejador-reloj])